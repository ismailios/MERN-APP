{"ast":null,"code":"import { BASE_URL } from \"../../config/config\";\nexport const SIGNUP = \"SIGNUP\";\nexport const LOGIN = \"LOGIN\";\nexport const LOGOUT = \"LOGOUT\";\nexport const AUTHENTICATE = \"AUTHENTICATE\";\nconst formData = new FormData();\nconst expirationDate = new Date(new Date().getTime() + parseInt(36 * 1000));\nexport const authenticate = (userId, token, expiryTime) => {\n  return dispatch => {\n    dispatch({\n      type: AUTHENTICATE,\n      userId: userId,\n      token: token,\n      expiryTime: expiryTime\n    });\n  };\n};\nexport const signUp = (username, email, password) => {\n  return async dispatch => {\n    const response = await fetch(BASE_URL + \"signup\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        username: username,\n        email: email,\n        password: password\n      })\n    });\n\n    if (!response.ok) {\n      throw new Error(\"Something went Wrong !!\");\n    }\n\n    const resData = await response.json();\n    dispatch({\n      type: SIGNUP\n    });\n  };\n};\nexport const login = (email, password) => {\n  return async dispatch => {\n    const response = await fetch(BASE_URL + \"login\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        email: email,\n        password: password\n      })\n    });\n\n    if (!response.ok) {\n      throw new Error(\"Something went Wrong !!\");\n    }\n\n    const resData = await response.json();\n    dispatch(authenticate(resData.userId, resData.token, expirationDate));\n    saveDataToStorage(resData.token, resData.userId, expirationDate);\n  };\n};\nexport const logout = () => {\n  localStorage.removeItem(\"userData\");\n  return {\n    type: LOGOUT\n  };\n};\n\nconst saveDataToStorage = (token, userId, expirationData) => {\n  localStorage.setItem(\"userData\", JSON.stringify({\n    token: token,\n    userId: userId,\n    expiryDate: expirationData.toISOString()\n  }));\n};","map":{"version":3,"sources":["/Users/user/Desktop/Projects/Node Js/Recap/nodeJS-ReactJS-Crud/frontend/src/store/auth/actions.js"],"names":["BASE_URL","SIGNUP","LOGIN","LOGOUT","AUTHENTICATE","formData","FormData","expirationDate","Date","getTime","parseInt","authenticate","userId","token","expiryTime","dispatch","type","signUp","username","email","password","response","fetch","method","headers","body","JSON","stringify","ok","Error","resData","json","login","saveDataToStorage","logout","localStorage","removeItem","expirationData","setItem","expiryDate","toISOString"],"mappings":"AAAA,SAASA,QAAT,QAAyB,qBAAzB;AAEA,OAAO,MAAMC,MAAM,GAAG,QAAf;AACP,OAAO,MAAMC,KAAK,GAAG,OAAd;AACP,OAAO,MAAMC,MAAM,GAAG,QAAf;AACP,OAAO,MAAMC,YAAY,GAAG,cAArB;AAEP,MAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AAEA,MAAMC,cAAc,GAAG,IAAIC,IAAJ,CAAS,IAAIA,IAAJ,GAAWC,OAAX,KAAuBC,QAAQ,CAAC,KAAK,IAAN,CAAxC,CAAvB;AAEA,OAAO,MAAMC,YAAY,GAAG,CAACC,MAAD,EAASC,KAAT,EAAgBC,UAAhB,KAA+B;AACzD,SAAQC,QAAD,IAAc;AACnBA,IAAAA,QAAQ,CAAC;AACPC,MAAAA,IAAI,EAAEZ,YADC;AAEPQ,MAAAA,MAAM,EAAEA,MAFD;AAGPC,MAAAA,KAAK,EAAEA,KAHA;AAIPC,MAAAA,UAAU,EAAEA;AAJL,KAAD,CAAR;AAMD,GAPD;AAQD,CATM;AAWP,OAAO,MAAMG,MAAM,GAAG,CAACC,QAAD,EAAWC,KAAX,EAAkBC,QAAlB,KAA+B;AACnD,SAAO,MAAOL,QAAP,IAAoB;AACzB,UAAMM,QAAQ,GAAG,MAAMC,KAAK,CAACtB,QAAQ,GAAG,QAAZ,EAAsB;AAChDuB,MAAAA,MAAM,EAAE,MADwC;AAEhDC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OAFuC;AAKhDC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBT,QAAAA,QAAQ,EAAEA,QADS;AAEnBC,QAAAA,KAAK,EAAEA,KAFY;AAGnBC,QAAAA,QAAQ,EAAEA;AAHS,OAAf;AAL0C,KAAtB,CAA5B;;AAYA,QAAI,CAACC,QAAQ,CAACO,EAAd,EAAkB;AAChB,YAAM,IAAIC,KAAJ,CAAU,yBAAV,CAAN;AACD;;AACD,UAAMC,OAAO,GAAG,MAAMT,QAAQ,CAACU,IAAT,EAAtB;AAEAhB,IAAAA,QAAQ,CAAC;AACPC,MAAAA,IAAI,EAAEf;AADC,KAAD,CAAR;AAGD,GArBD;AAsBD,CAvBM;AAyBP,OAAO,MAAM+B,KAAK,GAAG,CAACb,KAAD,EAAQC,QAAR,KAAqB;AACxC,SAAO,MAAOL,QAAP,IAAoB;AACzB,UAAMM,QAAQ,GAAG,MAAMC,KAAK,CAACtB,QAAQ,GAAG,OAAZ,EAAqB;AAC/CuB,MAAAA,MAAM,EAAE,MADuC;AAE/CC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OAFsC;AAK/CC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBR,QAAAA,KAAK,EAAEA,KADY;AAEnBC,QAAAA,QAAQ,EAAEA;AAFS,OAAf;AALyC,KAArB,CAA5B;;AAWA,QAAI,CAACC,QAAQ,CAACO,EAAd,EAAkB;AAChB,YAAM,IAAIC,KAAJ,CAAU,yBAAV,CAAN;AACD;;AAED,UAAMC,OAAO,GAAG,MAAMT,QAAQ,CAACU,IAAT,EAAtB;AAEAhB,IAAAA,QAAQ,CAACJ,YAAY,CAACmB,OAAO,CAAClB,MAAT,EAAiBkB,OAAO,CAACjB,KAAzB,EAAgCN,cAAhC,CAAb,CAAR;AAEA0B,IAAAA,iBAAiB,CAACH,OAAO,CAACjB,KAAT,EAAgBiB,OAAO,CAAClB,MAAxB,EAAgCL,cAAhC,CAAjB;AACD,GArBD;AAsBD,CAvBM;AAyBP,OAAO,MAAM2B,MAAM,GAAG,MAAM;AAC1BC,EAAAA,YAAY,CAACC,UAAb,CAAwB,UAAxB;AACA,SAAO;AACLpB,IAAAA,IAAI,EAAEb;AADD,GAAP;AAGD,CALM;;AAOP,MAAM8B,iBAAiB,GAAG,CAACpB,KAAD,EAAQD,MAAR,EAAgByB,cAAhB,KAAmC;AAC3DF,EAAAA,YAAY,CAACG,OAAb,CACE,UADF,EAEEZ,IAAI,CAACC,SAAL,CAAe;AACbd,IAAAA,KAAK,EAAEA,KADM;AAEbD,IAAAA,MAAM,EAAEA,MAFK;AAGb2B,IAAAA,UAAU,EAAEF,cAAc,CAACG,WAAf;AAHC,GAAf,CAFF;AAQD,CATD","sourcesContent":["import { BASE_URL } from \"../../config/config\";\n\nexport const SIGNUP = \"SIGNUP\";\nexport const LOGIN = \"LOGIN\";\nexport const LOGOUT = \"LOGOUT\";\nexport const AUTHENTICATE = \"AUTHENTICATE\";\n\nconst formData = new FormData();\n\nconst expirationDate = new Date(new Date().getTime() + parseInt(36 * 1000));\n\nexport const authenticate = (userId, token, expiryTime) => {\n  return (dispatch) => {\n    dispatch({\n      type: AUTHENTICATE,\n      userId: userId,\n      token: token,\n      expiryTime: expiryTime,\n    });\n  };\n};\n\nexport const signUp = (username, email, password) => {\n  return async (dispatch) => {\n    const response = await fetch(BASE_URL + \"signup\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        username: username,\n        email: email,\n        password: password,\n      }),\n    });\n\n    if (!response.ok) {\n      throw new Error(\"Something went Wrong !!\");\n    }\n    const resData = await response.json();\n\n    dispatch({\n      type: SIGNUP,\n    });\n  };\n};\n\nexport const login = (email, password) => {\n  return async (dispatch) => {\n    const response = await fetch(BASE_URL + \"login\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        email: email,\n        password: password,\n      }),\n    });\n\n    if (!response.ok) {\n      throw new Error(\"Something went Wrong !!\");\n    }\n\n    const resData = await response.json();\n\n    dispatch(authenticate(resData.userId, resData.token, expirationDate));\n\n    saveDataToStorage(resData.token, resData.userId, expirationDate);\n  };\n};\n\nexport const logout = () => {\n  localStorage.removeItem(\"userData\");\n  return {\n    type: LOGOUT,\n  };\n};\n\nconst saveDataToStorage = (token, userId, expirationData) => {\n  localStorage.setItem(\n    \"userData\",\n    JSON.stringify({\n      token: token,\n      userId: userId,\n      expiryDate: expirationData.toISOString(),\n    })\n  );\n};\n"]},"metadata":{},"sourceType":"module"}