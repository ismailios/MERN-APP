{"ast":null,"code":"import { BASE_URL } from \"../../config/config\";\nexport const SIGNUP = \"SIGNUP\";\nexport const LOGIN = \"LOGIN\";\nexport const LOGOUT = \"LOGOUT\";\nconst formData = new FormData();\nexport const signUp = (username, email, password) => {\n  return async dispatch => {\n    formData.append(\"username\", username);\n    formData.append(\"email\", email);\n    formData.append(\"password\", password);\n    const response = await fetch(BASE_URL + \"signup\", {\n      method: \"POST\",\n      body: formData\n    });\n\n    if (!response.ok) {\n      throw new Error(\"Something went Wrong !!\");\n    }\n\n    const resData = await response.json();\n    dispatch({\n      type: SIGNUP\n    });\n  };\n};\nexport const login = (email, password) => {\n  return async dispatch => {\n    formData.append(\"email\", email);\n    formData.append(\"password\", password);\n    const response = await fetch(BASE_URL + \"login\", {\n      method: \"POST\",\n      body: formData\n    });\n\n    if (!response.ok) {\n      throw new Error(\"Something went Wrong !!\");\n    }\n\n    const resData = await response.json();\n    dispatch({\n      type: LOGIN,\n      userId: resData.userId,\n      token: resData.token,\n      username: resData.username\n    });\n  };\n  const expirationDate = new Date(new Date().getTime() + parseInt(22 * 1000));\n  saveDataToStorage(resData.token, resData.userId, expirationDate);\n};\nexport const logout = () => {\n  return {\n    type: LOGOUT\n  };\n};\n\nconst saveDataToStorage = (token, userId, expirationData) => {\n  localStorage.setItem(\"userData\", JSON.stringify({\n    token: token,\n    userId: userId,\n    expiryData: expirationData.toISOString()\n  }));\n};","map":{"version":3,"sources":["/Users/user/Desktop/Projects/Node Js/Recap/nodeJS-ReactJS-Crud/frontend/src/store/auth/actions.js"],"names":["BASE_URL","SIGNUP","LOGIN","LOGOUT","formData","FormData","signUp","username","email","password","dispatch","append","response","fetch","method","body","ok","Error","resData","json","type","login","userId","token","expirationDate","Date","getTime","parseInt","saveDataToStorage","logout","expirationData","localStorage","setItem","JSON","stringify","expiryData","toISOString"],"mappings":"AAAA,SAASA,QAAT,QAAyB,qBAAzB;AAEA,OAAO,MAAMC,MAAM,GAAG,QAAf;AACP,OAAO,MAAMC,KAAK,GAAG,OAAd;AACP,OAAO,MAAMC,MAAM,GAAG,QAAf;AAEP,MAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AAEA,OAAO,MAAMC,MAAM,GAAG,CAACC,QAAD,EAAWC,KAAX,EAAkBC,QAAlB,KAA+B;AACnD,SAAO,MAAOC,QAAP,IAAoB;AACzBN,IAAAA,QAAQ,CAACO,MAAT,CAAgB,UAAhB,EAA4BJ,QAA5B;AACAH,IAAAA,QAAQ,CAACO,MAAT,CAAgB,OAAhB,EAAyBH,KAAzB;AACAJ,IAAAA,QAAQ,CAACO,MAAT,CAAgB,UAAhB,EAA4BF,QAA5B;AACA,UAAMG,QAAQ,GAAG,MAAMC,KAAK,CAACb,QAAQ,GAAG,QAAZ,EAAsB;AAChDc,MAAAA,MAAM,EAAE,MADwC;AAEhDC,MAAAA,IAAI,EAAEX;AAF0C,KAAtB,CAA5B;;AAKA,QAAI,CAACQ,QAAQ,CAACI,EAAd,EAAkB;AAChB,YAAM,IAAIC,KAAJ,CAAU,yBAAV,CAAN;AACD;;AACD,UAAMC,OAAO,GAAG,MAAMN,QAAQ,CAACO,IAAT,EAAtB;AAEAT,IAAAA,QAAQ,CAAC;AACPU,MAAAA,IAAI,EAAEnB;AADC,KAAD,CAAR;AAGD,GAjBD;AAkBD,CAnBM;AAqBP,OAAO,MAAMoB,KAAK,GAAG,CAACb,KAAD,EAAQC,QAAR,KAAqB;AACxC,SAAO,MAAOC,QAAP,IAAoB;AACzBN,IAAAA,QAAQ,CAACO,MAAT,CAAgB,OAAhB,EAAyBH,KAAzB;AACAJ,IAAAA,QAAQ,CAACO,MAAT,CAAgB,UAAhB,EAA4BF,QAA5B;AAEA,UAAMG,QAAQ,GAAG,MAAMC,KAAK,CAACb,QAAQ,GAAG,OAAZ,EAAqB;AAC/Cc,MAAAA,MAAM,EAAE,MADuC;AAE/CC,MAAAA,IAAI,EAAEX;AAFyC,KAArB,CAA5B;;AAKA,QAAI,CAACQ,QAAQ,CAACI,EAAd,EAAkB;AAChB,YAAM,IAAIC,KAAJ,CAAU,yBAAV,CAAN;AACD;;AAED,UAAMC,OAAO,GAAG,MAAMN,QAAQ,CAACO,IAAT,EAAtB;AAEAT,IAAAA,QAAQ,CAAC;AACPU,MAAAA,IAAI,EAAElB,KADC;AAEPoB,MAAAA,MAAM,EAAEJ,OAAO,CAACI,MAFT;AAGPC,MAAAA,KAAK,EAAEL,OAAO,CAACK,KAHR;AAIPhB,MAAAA,QAAQ,EAAEW,OAAO,CAACX;AAJX,KAAD,CAAR;AAMD,GArBD;AAuBA,QAAMiB,cAAc,GAAG,IAAIC,IAAJ,CAAS,IAAIA,IAAJ,GAAWC,OAAX,KAAuBC,QAAQ,CAAC,KAAK,IAAN,CAAxC,CAAvB;AACAC,EAAAA,iBAAiB,CAACV,OAAO,CAACK,KAAT,EAAgBL,OAAO,CAACI,MAAxB,EAAgCE,cAAhC,CAAjB;AACD,CA1BM;AA4BP,OAAO,MAAMK,MAAM,GAAG,MAAM;AAC1B,SAAO;AACLT,IAAAA,IAAI,EAAEjB;AADD,GAAP;AAGD,CAJM;;AAMP,MAAMyB,iBAAiB,GAAG,CAACL,KAAD,EAAQD,MAAR,EAAgBQ,cAAhB,KAAmC;AAC3DC,EAAAA,YAAY,CAACC,OAAb,CACE,UADF,EAEEC,IAAI,CAACC,SAAL,CAAe;AACbX,IAAAA,KAAK,EAAEA,KADM;AAEbD,IAAAA,MAAM,EAAEA,MAFK;AAGba,IAAAA,UAAU,EAAEL,cAAc,CAACM,WAAf;AAHC,GAAf,CAFF;AAQD,CATD","sourcesContent":["import { BASE_URL } from \"../../config/config\";\n\nexport const SIGNUP = \"SIGNUP\";\nexport const LOGIN = \"LOGIN\";\nexport const LOGOUT = \"LOGOUT\";\n\nconst formData = new FormData();\n\nexport const signUp = (username, email, password) => {\n  return async (dispatch) => {\n    formData.append(\"username\", username);\n    formData.append(\"email\", email);\n    formData.append(\"password\", password);\n    const response = await fetch(BASE_URL + \"signup\", {\n      method: \"POST\",\n      body: formData,\n    });\n\n    if (!response.ok) {\n      throw new Error(\"Something went Wrong !!\");\n    }\n    const resData = await response.json();\n\n    dispatch({\n      type: SIGNUP,\n    });\n  };\n};\n\nexport const login = (email, password) => {\n  return async (dispatch) => {\n    formData.append(\"email\", email);\n    formData.append(\"password\", password);\n\n    const response = await fetch(BASE_URL + \"login\", {\n      method: \"POST\",\n      body: formData,\n    });\n\n    if (!response.ok) {\n      throw new Error(\"Something went Wrong !!\");\n    }\n\n    const resData = await response.json();\n\n    dispatch({\n      type: LOGIN,\n      userId: resData.userId,\n      token: resData.token,\n      username: resData.username,\n    });\n  };\n\n  const expirationDate = new Date(new Date().getTime() + parseInt(22 * 1000));\n  saveDataToStorage(resData.token, resData.userId, expirationDate);\n};\n\nexport const logout = () => {\n  return {\n    type: LOGOUT,\n  };\n};\n\nconst saveDataToStorage = (token, userId, expirationData) => {\n  localStorage.setItem(\n    \"userData\",\n    JSON.stringify({\n      token: token,\n      userId: userId,\n      expiryData: expirationData.toISOString(),\n    })\n  );\n};\n"]},"metadata":{},"sourceType":"module"}