{"ast":null,"code":"var _jsxFileName = \"/Users/user/Desktop/Projects/Node Js/Recap/nodeJS-ReactJS-Crud/frontend/src/components/product/AddProduct.js\",\n    _s = $RefreshSig$();\n\nimport React, { useReducer } from \"react\";\nimport * as actions from '../../store/product/actions';\nimport { useForm } from \"react-hook-form\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory, useLocation, Redirect } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst INPUT_CHANGE = \"INPUT_CHANGE\";\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case INPUT_CHANGE:\n      const {\n        name,\n        value\n      } = action.payload;\n      return { ...state,\n        [name]: value\n      };\n\n    default:\n      return state;\n  }\n};\n\nconst AddProduct = () => {\n  _s();\n\n  let History = useHistory();\n  const params = useLocation();\n  let productId = \"\";\n  productId = params.state ? params.state.productId : \"\";\n  const products = useSelector(state => state.products.products);\n  const selectedProduct = products.find(product => product._id === productId);\n  const initialState = {\n    title: selectedProduct ? selectedProduct.title : \"\",\n    price: selectedProduct ? selectedProduct.price : \"\",\n    image: selectedProduct ? selectedProduct.image : \"\",\n    description: selectedProduct ? selectedProduct.description : \"\"\n  };\n  const {\n    errors,\n    register,\n    handleSubmit\n  } = useForm();\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const dispatchRedux = useDispatch();\n\n  const inputChangeHnadler = (name, value) => {\n    dispatch({\n      type: INPUT_CHANGE,\n      payload: {\n        name: name,\n        value: value\n      }\n    });\n  };\n\n  const onSubmithandler = () => {\n    if (productId) {\n      dispatchRedux(actions.updateProduct(productId, state.title, state.price, state.image, state.description)).then(() => {\n        History.push('/');\n      });\n    } else {\n      dispatchRedux(actions.addProduct(state.title, state.price, state.image, state.description)).then(() => {\n        History.push('/');\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 600,\n      margin: 15\n    },\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit(onSubmithandler),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          ref: register({\n            required: true\n          }),\n          name: \"title\",\n          value: state.title,\n          onChange: e => inputChangeHnadler(\"title\", e.target.value),\n          className: \"form-control \",\n          placeholder: \"Enter title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this), errors.title && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"alert alert-danger mb-2 mt-2\",\n          children: \"This field is required\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 28\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          ref: register({\n            required: true\n          }),\n          name: \"price\",\n          value: state.price,\n          onChange: e => inputChangeHnadler(\"price\", e.target.value),\n          className: \"form-control\",\n          placeholder: \"Enter Price\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this), errors.price && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"alert alert-danger mb-2 mt-2\",\n          children: \"This field is required\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          ref: register({\n            required: true\n          }),\n          name: \"image\",\n          onChange: e => inputChangeHnadler(\"image\", e.target.files[0]),\n          className: \"form-control\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), errors.image && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"alert alert-danger mb-2 mt-2\",\n          children: \"This field is required\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 28\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          ref: register({\n            required: true\n          }),\n          name: \"description\",\n          className: \"form-control\",\n          value: state.description,\n          onChange: e => inputChangeHnadler(\"description\", e.target.value),\n          placeholder: \"Enter description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this), errors.description && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"alert alert-danger mb-2 mt-2\",\n          children: \"This field is required\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 36\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        children: productId ? \"EDIT PRODUCT\" : \"ADD PRODUCT\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AddProduct, \"z9AtrM3p+gs4yXgbbAuRJoBTc7U=\", false, function () {\n  return [useHistory, useLocation, useSelector, useForm, useDispatch];\n});\n\n_c = AddProduct;\nexport default AddProduct;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddProduct\");","map":{"version":3,"sources":["/Users/user/Desktop/Projects/Node Js/Recap/nodeJS-ReactJS-Crud/frontend/src/components/product/AddProduct.js"],"names":["React","useReducer","actions","useForm","useDispatch","useSelector","useHistory","useLocation","Redirect","INPUT_CHANGE","reducer","state","action","type","name","value","payload","AddProduct","History","params","productId","products","selectedProduct","find","product","_id","initialState","title","price","image","description","errors","register","handleSubmit","dispatch","dispatchRedux","inputChangeHnadler","onSubmithandler","updateProduct","then","push","addProduct","maxWidth","margin","required","e","target","files"],"mappings":"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","sourcesContent":["import React, { useReducer } from \"react\";\nimport * as actions from '../../store/product/actions'\nimport { useForm  } from \"react-hook-form\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {useHistory, useLocation, Redirect} from 'react-router-dom'\n\nconst INPUT_CHANGE=\"INPUT_CHANGE\"\n\n\n\nconst reducer = (state,action) => {\n    switch (action.type) {\n        case INPUT_CHANGE:\n            const {name,value} =action.payload\n            return {\n              ...state,\n                [name]:value\n            }\n        default:\n            return state;\n    }\n\n}\n\n\n\n\nconst AddProduct = () => {\n\n  let History = useHistory();\n  const params = useLocation()\n  let productId =\"\";\n\n  productId =params.state ? params.state.productId : \"\"\n  const products = useSelector(state => state.products.products)\n  const selectedProduct = products.find(product => product._id===productId)\n\n\n  const initialState = {\n    title : selectedProduct ? selectedProduct.title : \"\",\n    price : selectedProduct ? selectedProduct.price : \"\",\n    image : selectedProduct ? selectedProduct.image : \"\",\n    description : selectedProduct ? selectedProduct.description : \"\",\n}\n\n    const {errors,register,handleSubmit} = useForm()\n\n    const [state, dispatch] = useReducer(reducer, initialState)\n\n    const dispatchRedux = useDispatch()\n\n \n\n\n    const inputChangeHnadler =(name,value) => {\n        dispatch({\n            type :INPUT_CHANGE,\n            payload: {\n                name:name,\n                value:value\n            }\n        })\n\n    }\n\n\n   const onSubmithandler = () => {\n     if(productId) {\n      dispatchRedux(actions.updateProduct(productId,state.title,state.price,state.image,state.description)).then(() => {\n        History.push('/')\n      })\n     }\n     else {\n      dispatchRedux(actions.addProduct(state.title,state.price,state.image,state.description)).then(() => {\n        History.push('/')\n      })\n      \n     }\n      \n     \n   }\n\n\n\n\n  return (\n    <div style={{maxWidth:600, margin:15}}>\n      <form onSubmit={handleSubmit(onSubmithandler)}>\n        <div className=\"form-group mb-2\">\n          <input\n            type=\"text\"\n            ref={register({ required: true })}\n            name=\"title\"\n            value={state.title}\n            onChange={(e) => inputChangeHnadler(\"title\",e.target.value)}\n            className=\"form-control \"\n            placeholder=\"Enter title\"\n          />\n          {errors.title && <p className=\"alert alert-danger mb-2 mt-2\">This field is required</p>}\n        </div>\n        <div className=\"form-group mb-2\">\n          <input\n            type=\"number\"\n            ref={register({ required: true })}\n            name=\"price\"\n            value={state.price}\n            onChange={(e) => inputChangeHnadler(\"price\",e.target.value)}\n            className=\"form-control\"\n            placeholder=\"Enter Price\"\n          />\n           {errors.price && <p className=\"alert alert-danger mb-2 mt-2\">This field is required</p>}\n        </div>\n        <div className=\"form-group mb-2\">\n          <input\n            type=\"file\"\n            ref={register({ required: true })}\n            name=\"image\"\n            onChange={(e) => inputChangeHnadler(\"image\",e.target.files[0])}\n            className=\"form-control\"\n          />\n          {errors.image && <p className=\"alert alert-danger mb-2 mt-2\">This field is required</p>}\n        </div>\n        <div className=\"form-group mb-2\">\n          <input\n            type=\"text\"\n            ref={register({ required: true })}\n            name=\"description\"\n            className=\"form-control\"\n            value={state.description}\n            onChange={(e) => inputChangeHnadler(\"description\",e.target.value)}\n            placeholder=\"Enter description\"\n          />\n            {errors.description && <p className=\"alert alert-danger mb-2 mt-2\">This field is required</p>}\n        </div>\n        \n        <button type=\"submit\" className=\"btn btn-primary\">\n          {productId ? \"EDIT PRODUCT\" : \"ADD PRODUCT\"}\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default AddProduct;\n"]},"metadata":{},"sourceType":"module"}