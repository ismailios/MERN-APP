{"ast":null,"code":"import { BASE_URL } from \"../../config/config\";\nexport const SIGNUP = \"SIGNUP\";\nexport const LOGIN = \"LOGIN\";\nexport const LOGOUT = \"LOGOUT\";\nexport const AUTHENTICATE = \"AUTHENTICATE\";\nconst formData = new FormData();\nconst expirationDate = new Date(new Date().getTime() + parseInt(10 * 1000));\nexport const authenticate = (userId, token, expiryTime) => {\n  return dispatch => {\n    dispatch({\n      type: AUTHENTICATE,\n      userId: userId,\n      token: token,\n      expiryTime: expiryTime\n    });\n  };\n};\nexport const signUp = (username, email, password) => {\n  return async dispatch => {\n    formData.append(\"username\", username);\n    formData.append(\"email\", email);\n    formData.append(\"password\", password);\n    const response = await fetch(BASE_URL + \"signup\", {\n      method: \"POST\",\n      body: formData\n    });\n\n    if (!response.ok) {\n      throw new Error(\"Something went Wrong !!\");\n    }\n\n    const resData = await response.json();\n    dispatch({\n      type: SIGNUP\n    });\n  };\n};\nexport const login = (email, password) => {\n  return async dispatch => {\n    formData.append(\"email\", email);\n    formData.append(\"password\", password);\n    const response = await fetch(BASE_URL + \"login\", {\n      method: \"POST\",\n      body: formData\n    });\n\n    if (!response.ok) {\n      throw new Error(\"Something went Wrong !!\");\n    }\n\n    const resData = await response.json();\n    dispatch(authenticate(resData.userId, resData.token, expirationDate));\n    saveDataToStorage(resData.token, resData.userId, expirationDate);\n  };\n};\nexport const logout = () => {\n  return {\n    type: LOGOUT\n  };\n};\n\nconst saveDataToStorage = (token, userId, expirationData) => {\n  localStorage.setItem(\"userData\", JSON.stringify({\n    token: token,\n    userId: userId,\n    expiryData: expirationData.toISOString()\n  }));\n};","map":{"version":3,"sources":["/Users/user/Desktop/Projects/Node Js/Recap/nodeJS-ReactJS-Crud/frontend/src/store/auth/actions.js"],"names":["BASE_URL","SIGNUP","LOGIN","LOGOUT","AUTHENTICATE","formData","FormData","expirationDate","Date","getTime","parseInt","authenticate","userId","token","expiryTime","dispatch","type","signUp","username","email","password","append","response","fetch","method","body","ok","Error","resData","json","login","saveDataToStorage","logout","expirationData","localStorage","setItem","JSON","stringify","expiryData","toISOString"],"mappings":"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","sourcesContent":["import { BASE_URL } from \"../../config/config\";\n\nexport const SIGNUP = \"SIGNUP\";\nexport const LOGIN = \"LOGIN\";\nexport const LOGOUT = \"LOGOUT\";\nexport const AUTHENTICATE = \"AUTHENTICATE\";\n\nconst formData = new FormData();\nconst expirationDate = new Date(new Date().getTime() + parseInt(10 * 1000));\n\nexport const authenticate = (userId, token, expiryTime) => {\n  return (dispatch) => {\n    dispatch({\n      type: AUTHENTICATE,\n      userId: userId,\n      token: token,\n      expiryTime: expiryTime,\n    });\n  };\n};\n\nexport const signUp = (username, email, password) => {\n  return async (dispatch) => {\n    formData.append(\"username\", username);\n    formData.append(\"email\", email);\n    formData.append(\"password\", password);\n    const response = await fetch(BASE_URL + \"signup\", {\n      method: \"POST\",\n      body: formData,\n    });\n\n    if (!response.ok) {\n      throw new Error(\"Something went Wrong !!\");\n    }\n    const resData = await response.json();\n\n    dispatch({\n      type: SIGNUP,\n    });\n  };\n};\n\nexport const login = (email, password) => {\n  return async (dispatch) => {\n    formData.append(\"email\", email);\n    formData.append(\"password\", password);\n\n    const response = await fetch(BASE_URL + \"login\", {\n      method: \"POST\",\n      body: formData,\n    });\n\n    if (!response.ok) {\n      throw new Error(\"Something went Wrong !!\");\n    }\n\n    const resData = await response.json();\n\n    dispatch(authenticate(resData.userId, resData.token, expirationDate));\n\n    saveDataToStorage(resData.token, resData.userId, expirationDate);\n  };\n};\n\nexport const logout = () => {\n  return {\n    type: LOGOUT,\n  };\n};\n\nconst saveDataToStorage = (token, userId, expirationData) => {\n  localStorage.setItem(\n    \"userData\",\n    JSON.stringify({\n      token: token,\n      userId: userId,\n      expiryData: expirationData.toISOString(),\n    })\n  );\n};\n"]},"metadata":{},"sourceType":"module"}